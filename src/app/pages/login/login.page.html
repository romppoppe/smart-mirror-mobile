<ion-content [fullscreen]="true" class="bg-gradient">
  
  <div class="login-container">

    <div class="header-logo">
      <div class="icon-circle">
        <ion-icon name="scan-outline"></ion-icon>
      </div>
      <h1>Espejo Inteligente</h1>
      <p class="subtitle">Monitoreo de salud</p>
    </div>

    <div class="glass-card main-card">

      <div class="tab-switch">
        <div class="tab-btn" [class.active]="mode === 'login'" (click)="setMode('login')">
          Ingresar
        </div>
        <div class="tab-btn" [class.active]="mode === 'register'" (click)="setMode('register')">
          Registrarse
        </div>
        <div class="slider" [class.right]="mode === 'register'"></div>
      </div>

      <div class="info-box glass-alert" *ngIf="mode === 'register'">
        <ion-icon name="information-circle"></ion-icon>
        <div>
          <strong>Paso importante</strong>
          <p>Al crear tu cuenta deberás <b>Completar tu Perfil</b> para calibrar el espejo.</p>
        </div>
      </div>

      <div class="form-content">

        <div class="input-group" *ngIf="mode === 'register'">
          <label>Nombre</label>
          <div class="glass-input-wrapper">
            <ion-icon name="person-outline"></ion-icon>
            <input 
              type="text" 
              [(ngModel)]="displayName" 
              placeholder="Tu nombre"
              autocomplete="name"
              enterkeyhint="next">
          </div>
        </div>

        <div class="input-group">
          <label>Correo electrónico</label>
          <div class="glass-input-wrapper">
            <ion-icon name="mail-outline"></ion-icon>
            <input 
              type="email" 
              [(ngModel)]="email" 
              placeholder="ejemplo@correo.com"
              autocomplete="email"
              inputmode="email"
              enterkeyhint="next">
          </div>
        </div>

        <div class="input-group">
          <label>Contraseña</label>
          <div class="glass-input-wrapper">
            <ion-icon name="lock-closed-outline"></ion-icon>
            
            <input *ngIf="mode === 'login'"
              type="password" 
              [(ngModel)]="password" 
              placeholder="••••••••"
              autocomplete="current-password"
              enterkeyhint="go">

            <input *ngIf="mode === 'register'"
              type="password" 
              [(ngModel)]="password" 
              placeholder="Mínimo 6 caracteres"
              autocomplete="new-password"
              enterkeyhint="go">
          </div>
        </div>

        <div class="error-msg" *ngIf="error">
          <ion-icon name="alert-circle"></ion-icon>
          <span>{{ error }}</span>
        </div>

        <p class="hint-text" *ngIf="mode === 'register'">
          Tus datos médicos se almacenan de forma segura.
        </p>

        <button class="magic-button" (click)="submit()" [disabled]="loading">
          
          <ion-spinner name="crescent" *ngIf="loading"></ion-spinner>
          
          <span *ngIf="!loading" style="display: flex; align-items: center; gap: 8px;">
            {{ mode === 'login' ? 'INICIAR SESIÓN' : 'CREAR CUENTA' }}
            <ion-icon name="arrow-forward-outline"></ion-icon>
          </span>

        </button>

      </div>
    </div>
    
    <div class="footer-copy">
      <p>Proyecto de Tesis 2026</p>
    </div>

  </div>
</ion-content>